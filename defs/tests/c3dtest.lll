;C3D Testing
{
	(include "../c3d.def")

	;Canaries
	[[0x0]]42
	[[0x1]]42
	[[0x2]]42
	[[0x3]]42
	[[0x4]]42
	[[0x5]]42
	[[0x6]]42
	[[0x7]]42
	[[0x8]]42
	[[0x9]]42
	[[0xA]]42
	[[0xB]]42
	[[0xC]]42
	[[0xD]]42
	[[0xE]]42
	[[0xF]]42

	;Verify and store these values
	[[0x10]](* C3DOffset (EXP 256 31))
	[[0x11]](TopIndicatorSlot)
	[[0x12]](TopDataModelSlot)
	[[0x13]](TopUISlot)
	[[0x14]](TopContentSlot)
	[[0x15]](TopParentSlot)
	[[0x16]](TopOwnerSlot)
	[[0x17]](TopCreatorSlot)
	[[0x18]](TopTimestampSlot)
	[[0x19]](TopBehaviourSlot)
	[[0x1A]](TopTailSlot)
	[[0x1B]](TopHeadSlot)
	[[0x1C]](TopListLenSlot)

	;Verify is all currently 0
	[[0x21]](TopIndicator)
	[[0x22]](TopDataModel)
	[[0x23]](TopUI)
	[[0x24]](TopContent)
	[[0x25]](TopParent)
	[[0x26]](TopOwner)
	[[0x27]](TopCreator)
	[[0x28]](TopTimestamp)
	[[0x29]](TopBehaviour)
	[[0x2A]](TopTail)
	[[0x2B]](TopHead)
	[[0x2C]](TopListLen)

	;Init the c3d top slots
	[0x300]"indicator"
	[0x320]"datamodel"
	[0x340]"ui"
	[0x360]"content"
	[0x380]"parent"
	[0x3A0]"owner"
	[0x3C0]"creator"
	[0x3E0]"behaviour"

	(C3DInit 0x300 0 1 0 0 0 0 0)

	;Verify top slots were initialized correctly
	[[0x31]](TopIndicator)
	[[0x32]](TopDataModel)
	[[0x33]](TopUI)
	[[0x34]](TopContent)
	[[0x35]](TopParent)
	[[0x36]](TopOwner)
	[[0x37]](TopCreator)
	[[0x38]](TopTimestamp)
	[[0x39]](TopBehaviour)
	[[0x3A]](TopTail)
	[[0x3B]](TopHead)
	[[0x3C]](TopListLen)

	;Add 3 links
	[[0x40]](C3DCTS 0xDEAD1)
	[[0x41]](C3DCTS 0xDEAD2)
	[[0x42]](C3DCTS 0xDEAD3)

	[0x300]0xAA11
	[0x320]0xBB11
	[0x340]0xCC11
	[0x360]0xDD11
	[0x380]0xEE11
	[0x3A0]0xFF11

	(C3DAddLink 0x0DEAD1 0x0300 0x0 1)

	;Snap Shot The state
	[[0x50]]@@ @@0x40
	[[0x51]]@@(+ @@0x40 1)
	[[0x52]]@@(+ @@0x40 2)
	[[0x53]]@@(+ @@0x40 3)
	[[0x54]]@@(+ @@0x40 4)
	[[0x55]]@@(+ @@0x40 5)
	[[0x56]]@@(+ @@0x40 6)
	[[0x57]]@@(+ @@0x40 7)
	[[0x58]]@@(+ @@0x40 8)

	[[0x59]](TopHead)
	[[0x5A]](TopTail)
	[[0x5B]](TopListLen)

	[0x300]0xAA22
	[0x320]0xBB22
	[0x340]0xCC22
	[0x360]0xDD22
	[0x380]0xEE22
	[0x3A0]0xFF22

	(C3DAddLink 0xDEAD2 0x300 0 1)

	[[0x60]](C3DAddress @@0x41)
	[[0x61]](C3DPrev @@0x41)
	[[0x62]](C3DNext @@0x41)
	[[0x63]](C3DType @@0x41)
	[[0x64]](C3DBehaviour @@0x41)
	[[0x65]](C3DContent @@0x41)
	[[0x66]](C3DDataModel @@0x41)
	[[0x67]](C3DUI @@0x41)
	[[0x68]](C3DTimestamp @@0x41)

	[[0x69]](TopHead)
	[[0x6A]](TopTail)
	[[0x6B]](TopListLen)
	[[0x6C]](C3DNext @@0x40)


	[0x300]0xAA33
	[0x320]0xBB33
	[0x340]0xCC33
	[0x360]0xDD33
	[0x380]0xEE33
	[0x3A0]0xFF33
	(C3DAddLink 0xDEAD3 0x300 0 1)

	[[0x70]](C3DAddress @@0x42)
	[[0x71]](C3DPrev @@0x42)
	[[0x72]](C3DNext @@0x42)
	[[0x73]](C3DType @@0x42)
	[[0x74]](C3DBehaviour @@0x42)
	[[0x75]](C3DContent @@0x42)
	[[0x76]](C3DDataModel @@0x42)
	[[0x77]](C3DUI @@0x42)
	[[0x78]](C3DTimestamp @@0x42)

	[[0x79]](TopHead)
	[[0x7A]](TopTail)
	[[0x7B]](TopListLen)
	[[0x7C]](C3DNext @@0x41)

	;This ends link creation
	;Test link deletion


	(C3DRmLink 0xDEAD2)

	[[0x80]](C3DAddress @@0x41)
	[[0x81]](C3DPrev @@0x41)
	[[0x82]](C3DNext @@0x41)
	[[0x83]](C3DType @@0x41)
	[[0x84]](C3DBehaviour @@0x41)
	[[0x85]](C3DContent @@0x41)
	[[0x86]](C3DDataModel @@0x41)
	[[0x87]](C3DUI @@0x41)
	[[0x88]](C3DTimestamp @@0x41)

	[[0x89]](TopHead)
	[[0x8A]](TopTail)
	[[0x8B]](TopListLen)

	[[0x8C]](C3DNext @@0x40)
	[[0x8D]](C3DPrev @@0x42)

	(C3DRmLink 0xDEAD3)

	[[0x90]](C3DAddress @@0x42)
	[[0x91]](C3DPrev @@0x42)
	[[0x92]](C3DNext @@0x42)
	[[0x93]](C3DType @@0x42)
	[[0x94]](C3DBehaviour @@0x42)
	[[0x95]](C3DContent @@0x42)
	[[0x96]](C3DDataModel @@0x42)
	[[0x97]](C3DUI @@0x42)
	[[0x98]](C3DTimestamp @@0x42)

	[[0x99]](TopHead)
	[[0x9A]](TopTail)
	[[0x9B]](TopListLen)

	[[0x9C]](C3DNext @@0x40)

	;Test get and set
	(C3DSetTop "indicator" "indicator1")
	(C3DSetTop "datamodel" "datamodel1")
	(C3DSetTop "ui" "ui1")
	(C3DSetTop "content" "content1")
	(C3DSetTop "parent" "parent1")
	(C3DSetTop "owner" "owner1")
	(C3DSetTop "timestamp" "timestamp1")
	(C3DSetTop "behaviour" "behaviour1")

	[[0xA0]](C3DGetTop "indicator")
	[[0xA1]](C3DGetTop "datamodel")
	[[0xA2]](C3DGetTop "ui")
	[[0xA3]](C3DGetTop "parent")
	[[0xA4]](C3DGetTop "owner")
	[[0xA5]](C3DGetTop "timestamp")
	[[0xA6]](C3DGetTop "behaviour")

	(C3DSetLink 0xDEAD1 "address" "address1")
	(C3DSetLink 0xDEAD1 "type" "type1")
	(C3DSetLink 0xDEAD1 "behaviour" "behaviour1")
	(C3DSetLink 0xDEAD1 "content" "content1")
	(C3DSetLink 0xDEAD1 "datamodel" "datamodel1")
	(C3DSetLink 0xDEAD1 "ui" "ui1")
	(C3DSetLink 0xDEAD1 "timestamp" "timestamp1")
	
	[[0xB1]](C3DGetLink 0xDEAD1 "address")
	[[0xB2]](C3DGetLink 0xDEAD1 "type")
	[[0xB3]](C3DGetLink 0xDEAD1 "behaviour")
	[[0xB4]](C3DGetLink 0xDEAD1 "content")
	[[0xB5]](C3DGetLink 0xDEAD1 "datamodel")
	[[0xB6]](C3DGetLink 0xDEAD1 "ui")
	[[0xB7]](C3DGetLink 0xDEAD1 "timestamp")

}
